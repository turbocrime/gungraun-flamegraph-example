<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>gungraun flamegraphs</title>
<style>
  .pair { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
  .triple { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem; }
  .side { min-width: 0; }
  object { width: 100%; }
</style>
</head>
<body>

<h1>gungraun flamegraphs</h1>
<p class="note">Each flamegraph is interactive: click to zoom, Ctrl+F to search.</p>

<h2>staircase_repro &mdash; bench_request</h2>
<div class="pair">
  <div class="side">
    <h3>repro (upstream, buggy)</h3>
    <object class="flamegraph" data="repro/gungraun-flamegraph-example/repro/gungraun-flamegraph-example/staircase_repro/staircase_bug/bench_request.case/callgrind.bench_request.case.total.Ir.flamegraph.svg">
      <p class="missing">not yet generated &mdash; run <code>make repro</code></p>
    </object>
  </div>
  <div class="side">
    <h3>fixed (fix/flamegraph branch)</h3>
    <object class="flamegraph" data="fixed/gungraun-flamegraph-example/fixed/gungraun-flamegraph-example/staircase_repro/staircase_bug/bench_request.case/callgrind.bench_request.case.total.Ir.flamegraph.svg">
      <p class="missing">not yet generated &mdash; run <code>make fixed</code></p>
    </object>
  </div>
</div>

<h2>multithread_repro &mdash; bench_zero_thread_one</h2>
<div class="pair">
  <div class="side">
    <h3>repro (upstream, buggy) &mdash; total</h3>
    <object class="flamegraph" data="repro/gungraun-flamegraph-example/repro/gungraun-flamegraph-example/multithread_repro/multithread/bench_zero_thread_one.case/callgrind.bench_zero_thread_one.case.total.Ir.flamegraph.svg">
      <p class="missing">not yet generated &mdash; run <code>make repro</code></p>
    </object>
  </div>
  <div class="side">
    <h3>fixed &mdash; t2 (worker)</h3>
    <object class="flamegraph" data="fixed/gungraun-flamegraph-example/fixed/gungraun-flamegraph-example/multithread_repro/multithread/bench_zero_thread_one.case/callgrind.bench_zero_thread_one.case.t2.p1.Ir.flamegraph.svg">
      <p class="missing">not yet generated &mdash; run <code>make fixed</code></p>
    </object>
  </div>
</div>

<h2>multithread_repro &mdash; bench_one_thread_zero</h2>
<div class="pair">
  <div class="side">
    <h3>repro (upstream, buggy) &mdash; total</h3>
    <object class="flamegraph" data="repro/gungraun-flamegraph-example/repro/gungraun-flamegraph-example/multithread_repro/multithread/bench_one_thread_zero.case/callgrind.bench_one_thread_zero.case.total.Ir.flamegraph.svg">
      <p class="missing">not yet generated &mdash; run <code>make repro</code></p>
    </object>
  </div>
  <div class="side">
    <h3>fixed &mdash; t1 (bench)</h3>
    <object class="flamegraph" data="fixed/gungraun-flamegraph-example/fixed/gungraun-flamegraph-example/multithread_repro/multithread/bench_one_thread_zero.case/callgrind.bench_one_thread_zero.case.t1.p1.Ir.flamegraph.svg">
      <p class="missing">not yet generated &mdash; run <code>make fixed</code></p>
    </object>
  </div>
</div>

<h2>multithread_repro &mdash; bench_zero_thread_two</h2>
<div class="triple">
  <div class="side">
    <h3>repro (upstream, buggy) &mdash; total</h3>
    <object class="flamegraph" data="repro/gungraun-flamegraph-example/repro/gungraun-flamegraph-example/multithread_repro/multithread/bench_zero_thread_two.case/callgrind.bench_zero_thread_two.case.total.Ir.flamegraph.svg">
      <p class="missing">not yet generated &mdash; run <code>make repro</code></p>
    </object>
  </div>
  <div class="side">
    <h3>fixed &mdash; t2 (worker 1)</h3>
    <object class="flamegraph" data="fixed/gungraun-flamegraph-example/fixed/gungraun-flamegraph-example/multithread_repro/multithread/bench_zero_thread_two.case/callgrind.bench_zero_thread_two.case.t2.p1.Ir.flamegraph.svg">
      <p class="missing">not yet generated &mdash; run <code>make fixed</code></p>
    </object>
  </div>
  <div class="side">
    <h3>fixed &mdash; t3 (worker 2)</h3>
    <object class="flamegraph" data="fixed/gungraun-flamegraph-example/fixed/gungraun-flamegraph-example/multithread_repro/multithread/bench_zero_thread_two.case/callgrind.bench_zero_thread_two.case.t3.p1.Ir.flamegraph.svg">
      <p class="missing">not yet generated &mdash; run <code>make fixed</code></p>
    </object>
  </div>
</div>

<h2>multithread_repro &mdash; bench_one_thread_one</h2>
<div class="triple">
  <div class="side">
    <h3>repro (upstream, buggy) &mdash; total</h3>
    <object class="flamegraph" data="repro/gungraun-flamegraph-example/repro/gungraun-flamegraph-example/multithread_repro/multithread/bench_one_thread_one.case/callgrind.bench_one_thread_one.case.total.Ir.flamegraph.svg">
      <p class="missing">not yet generated &mdash; run <code>make repro</code></p>
    </object>
  </div>
  <div class="side">
    <h3>fixed &mdash; t1 (bench)</h3>
    <object class="flamegraph" data="fixed/gungraun-flamegraph-example/fixed/gungraun-flamegraph-example/multithread_repro/multithread/bench_one_thread_one.case/callgrind.bench_one_thread_one.case.t1.p1.Ir.flamegraph.svg">
      <p class="missing">not yet generated &mdash; run <code>make fixed</code></p>
    </object>
  </div>
  <div class="side">
    <h3>fixed &mdash; t2 (worker)</h3>
    <object class="flamegraph" data="fixed/gungraun-flamegraph-example/fixed/gungraun-flamegraph-example/multithread_repro/multithread/bench_one_thread_one.case/callgrind.bench_one_thread_one.case.t2.p1.Ir.flamegraph.svg">
      <p class="missing">not yet generated &mdash; run <code>make fixed</code></p>
    </object>
  </div>
</div>

<script>
// Size each <object> to its SVG's intrinsic height once loaded.
document.querySelectorAll('object.flamegraph').forEach(obj => {
  obj.addEventListener('load', () => {
    try {
      const svg = obj.contentDocument?.documentElement;
      if (svg) {
        const h = svg.getAttribute('height') || svg.viewBox?.baseVal?.height;
        if (h) obj.style.height = parseFloat(h) + 'px';
      }
    } catch (e) { /* cross-origin or missing */ }
  });
});
</script>

</body>
</html>
